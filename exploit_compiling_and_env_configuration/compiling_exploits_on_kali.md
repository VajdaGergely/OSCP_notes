# Compiling Windows exploits on kali
## Update
* Source: https://vk9-sec.com/microsoft-windows-server-2003-sp2-tcp-ip-ioctl-privilege-escalation-ms14-070-cve-2014-4076/
<pre>
$ i686-w64-mingw32-gcc-win32 37755.c -o exploit.exe -lws2_32
</pre>
## Basic steps
* source: https://null-byte.wonderhowto.com/how-to/use-mingw-compile-windows-exploits-kali-linux-0179461/
<pre>
# install compiler
$ sudo apt install mingw-w64 -y

# compile 64bit code
$ x86_64-w64-mingw32-gcc shell.c -o shell.exe

# compile 32bit code
$ i686-w64-mingw32-gcc shell.c -o shell.exe
</pre>
## lsws2_32
* this option tells the linker link the winsock library
## Debugging
* Error: conflicting type for 'NTSTATUS'
  * SOLUTION
    * https://vk9-sec.com/microsoft-windows-server-2003-sp2-tcp-ip-ioctl-privilege-escalation-ms14-070-cve-2014-4076/
    * REMOVE: typedef DWORD NTSTATUS
    * REPLACE: typedef _Return_type_success_(return >= 0) LONG NTSTATUS;
## Other things (talan jo lesz, de lehet hogy nem segit semmit)
* source:
  * https://vulp3cula.gitbook.io/hackers-grimoire/exploitation/working-with-exploits
  * https://medium.com/@_____________/compiling-exploits-4ec7bb9ec03c
<pre>
sudo apt install gcc-multilib -y
sudo apt install g++-multilib -y
</pre>
<pre>
$ i686-w64-mingw32-gcc netapi.c -lws2_32 -o netapi.exe
</pre>
# Compiling Linux exploits on kali
